Overview:
This document describes the serial interface between ClockTHREE and a computer.
With this interface commands can be sent to:
     get/set the absolute time YYYY MM DD hh:mm:ss 
     get/set time of day alarm hh:mm on/off.
     get/set scrollable message
     get/set Annual Event ID YYYY MM DD hh:mm:ss MID
     get/set display (think web cam interface here)


Details:
Baudrate: 57600 // Max rate for arduino

MAX_MSG_LEN = 100 BYTES

A synchronization message can be passed to re-establish communication if things get wonky,

const uint32_t SYNC_MSG = (0xFE)xMAX_MSG_LEN;

Each message will begin with a message id (MID).  The message length will
be determined by the MID and the message header (for variable length MIDs)

No message length will be longer than 256 bytes.

Message length will include all header information.

Message format:
    MID [msg_len] data

Fixed length messages:
MID           length description               payload format 
0x00               X not used                  NA
0x01               1 request absolute time     NA
0x02               5 set absolote time         4 bytes unsigned int (seconds from 00:00 Jan 1, 1970)
0x03               1 request tod alarm         NA
0x04               6 set tod alarm             4 bytes unsigned int (seconds from midnight)
0x05               2 request message           1 byte data ID (DID)
0x06               2 delete message            1 byte data ID (DID)
0x07               2 scroll message            DID
0x08               2 get annual event          DID
0x09               6 set annual event          DID 4 bytes unsigned int (seconds from Jan 1)
0x0A               1 request display           NA
0x0B               2 set display               DID 
0x0C               1 trigger MODE              NA
0x0D               1 trigger INC               NA
0x0E               1 trigger DEC               NA
0x0F               1 trigger AUX               NA
0x10               1 Get SW Version	       NA
0x11               1 Get SW About              NA
0x12     MAX_MSG_LEN Ping                      1 99 data bytes
0x13		  20 clear eeprom	       zero all data in EEPROM
0x14               1 EEPROM dump	       NA
0x15              12 Anniversary Alarm     See Anniversary Alarm Below.
0xEF     MAX_MSG_LEN SYNC		       99 data bytes (0xEF)(SYNC)

Variable length messages.  Payload length is first byte after MID

MID           length description               payload format 
0x70         3 + msg send data           1 byte- message length (payload len + 3), 1 byte (data id) DID, char* msg
0x71         2 + msg error data          1 byte length error message


The sync message 0xEF:
"0xEF" MAX_MSG_LEN times should be followed by a valid DID in the next byte.  If ClockTHREE does not recieve
a valid DID at the end of each message, it will not accept any new data until sync message is passed.  The
DBG LED is used to indicate ready for data.


Set time of day alarm message (MID 0x04) 6 bytes:
byte 0: 0x04
bytes 1,2,3,4: time (seconds from Unix epoch Jan 1 1970)
byte 5:
     bit 0: beep_set_flag 1 => set, 0 => unset
     bits 1-7: DID event data id # 0 for no DID.  This implies that DID < 128 (ignored for TOD alarm)

Anniversary Alarm MID:
byte0: MID 0x15
byte1-4 alarm time (seconds from Jan 1)
byte5: countdown #number seconds
byte6: countdown #number minutes
byte7: repeat interval # minutes
byte8: Days of the week repeat:
        bit0: repeat every Sunday hence
        bit1: repeat every Monday hence
        ...
        bit6: repeat every Saturday hence
        bit7: repeat every year hence (annual event)
byte9: scroll message DID
byte10: special effect #(1 => fireworks, 2=> color lines)
byte11: tune DID (Not implimented)

Anniversary Alarm DID:
Byte0: DID (0x01 - 0x40)
Byte1: 0x0E Message length (This is a fixed length message).
-----------------------------DID follows------------------
Byte2: 0x15 MID
Bytes3-13 Anniversary Alarm MID Bytes 1-11

DID Allocation:
0x01 - 0x40 -- Anniversary Alarm (first 0x40 DID reservered for anniversary alarms.)
0x41 - 0xFF -- Arbitrary